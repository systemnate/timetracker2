<h1>All Projects</h1>
<%= link_to "New Project", new_project_path, class: "btn btn-primary" %>
<div class="table-responsive">
  <table class="table table-striped table-hover" id="sorted-table">
    <thead>
      <th>Client</th>
      <th>Title</th>
      <th>Project Manager</th>
      <th>Time Allotted (hours)</th>
      <th>Time Spent</th>
      <th>Time Remaining</th>
      <th>Due Date</th>
    </thead>
    <tbody>

      <% @projects.each do |project| %>
      <tr>
        <td><%= project.client.name %></td>
        <td><%= project.title %></td>
        <td><%= project.user.name %></td>
        <td><%= allotted_time_hours(project) %></td>
        <td><%= time_spent(project) %></td>
        <td><%= time_remaining(project) %></td>
        <td><%= project.due_date %></td>
        <td><%= link_to project, class: "btn btn-primary" do %>
            <span class="glyphicon glyphicon-book" aria-hidden="true" title="Show Details"></span>
          <% end %>
        </td>
        <% if can? :update, project %>
          <td><%= link_to edit_project_path(project), class: "btn btn-info" do %>
              <span class="glyphicon glyphicon-pencil" aria-hidden="true" title="Edit Details"></span>
            <% end %>
          </td>
        <% end %>
        <% if can? :destroy, project %>
          <td><%= link_to project, method: :delete, data: { confirm: "Are you sure?" },
        class: "btn btn-danger" do %>
              <span class="glyphicon glyphicon-trash" aria-hidden="true" title="Delete"></span>
            <% end %>
          </td>
        <% end %>        
      </tr>
      <% end %>
    </tbody>
  </table>
</div>