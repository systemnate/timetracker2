<h1><%= @project.title %></h1>
<h2><%= @project.client.name %></h2>

<table class="table table-hover table-responsive">
  <thead>
    <th>Title</th>
    <th>Project Manager</th>
    <th>Allotted Time (minutes)</th>
    <th>Due Date</th>
  </thead>
  <tbody>
    <tr>
      <td><%= @project.title %></td>
      <td><%= @project.user.name %></td>
      <td><%= @project.allotted_time %></td>
      <td><%= @project.due_date %></td>
    </tr>
  </tbody>
</table>
<h2>Tasks</h2>
<div class="table-responsive">
  <table class="table table-striped table-hover" id="sorted-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Alt. ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Client</th>
        <th>Product</th>
        <th>Priority</th>
        <th>Summary</th>
        <th>Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody>
      <% @project.tasks.each do |task| %>
        <tr>
          <td><%= label_id(task) %></td>
          <td><%= label_alternate_id(task) %></td>
          <td><%= task.title %></td>
          <td><%= label_status(task) %></td>
          <td><%= show_client(task) %></td>
          <td><%= label_product(task)  %></td>
          <td><%= label_priority(task) %></td>
          <td><%= truncate(sanitize(task.summary), length: 70, separator: " ") %></td>
          <td><%= task.created_at.getlocal %></td>
          <td><%= show_time(task) %></td>
          <td><%= link_to task, class: "btn btn-primary" do %>
              <span class="glyphicon glyphicon-book" aria-hidden="true" title="Show Details"></span>
            <% end %>
          </td>
          <% if can? :update, @task %>
            <td><%= link_to edit_task_path(task), class: "btn btn-info" do %>
                <span class="glyphicon glyphicon-pencil" aria-hidden="true" title="Edit Details"></span>
              <% end %>
            </td>
          <% end %>
          <% if can? :destroy, @task %>
            <td><%= link_to task, method: :delete, data: { confirm: "Are you sure?" },
          class: "btn btn-danger" do %>
                <span class="glyphicon glyphicon-trash" aria-hidden="true" title="Delete"></span>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= link_to "Add New Task", new_task_path(client_id: @project.client.id), class: "btn btn-primary" %>
</div>