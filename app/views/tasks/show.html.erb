<h1 class="page-header"><%= link_to @task.title, edit_task_path(@task) %></h1>
<table class="table">
  <thead>
    <th>ID</th>
    <th>Alt. ID</th>
    <th>Status</th>
    <th>Client</th>
    <th>Product</th>
    <th>Priority</th>
    <th>Time Spent</th>
  </thead>
  <tbody>
    <tr>
      <td><%= label_id(@task) %></td>
      <td><%= label_alternate_id(@task) %></td>
      <td><%= label_status(@task) %></td>
      <td><%= label_client(@task) %></td>
      <td><span class="label label-primary"><%= show_product(@task) %></span></td>
      <td><%= label_priority(@task) %></td>
      <td><%= show_time(@task) %></td>
    </tr>
  </tbody>
</table>
<h2>Summary:</h2>
<%= show_summary(@task) %>
  <div id="tag_cloud">
    <h2>Tags</h2>
    <% tag_cloud @task.tag_counts, ['label label-warning', 'label label-warning', 'label label-warning'] do |tag, css_class| %>
      <%= link_to tag.name, tag_path(tag.name), class: css_class %>
    <% end %>
    <hr/>
  </div>
<% if attachment_count(@task) > 0 %>
<h2>Attachments:</h2>
<% end %>
<ul>
<% @task.task_details.each do |detail| %>
  <% if detail.task_attachment.file? %>
    <li><%= link_to detail.task_attachment_file_name, detail.task_attachment.url %></li>
  <% end %>
<% end %>
</ul>
<p></p>
<% @task.task_details.each do |detail| %>
  <% if can? :update, detail %>
  <%= link_to [:edit, @task, detail], class: "btn btn-default btn-xs edit" do %>
    Edit
    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
  <% end %>
  <% end %>
  <%= show_detail(detail) %>
<% end %>

<p><%= link_to "New Detail", new_task_task_detail_path(@task), class: "btn btn-primary" %></p>
<%= link_to "All Tasks", tasks_path, class: "btn btn-danger" %>
